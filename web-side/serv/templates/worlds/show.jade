extends layouts/application

block content
    script data={world:#{world.id}}
    div
        //.panel.panel-default: .panel-body
        .row
            .col-lg-8
                canvas(al-repeat='obj in objects'
                    object="{< obj.get('object') >}"
                    style="
                        left:{< obj.get_geom('position.x') >}px;
                        top:{< obj.get_geom('position.y') >}px;
                        display:inline-block; position:absolute;
                        transform: translate(-50%, -50%);"
                        )

            .col-lg-4
                .row: .col-lg-12
                    button.btn.btn-default(al-click='funcs.objects.create_object()') Новый
                    button.btn.btn-default(al-click='funcs.objects.remove_object()') Удалить
                .row: .col-lg-12
                    label Объект
                    select.form-control(al-value='data.selected')
                        option(value='')
                        option(al-repeat='obj in objects'
                            value="{< obj.get('object') >}"
                            al-selected="data.selected==obj.get('object')")
                            | {< obj.get_prop('name') >}

                .row: .col-lg-12
                    table.table
                        thead
                            th Свойство
                            th Значение
                        tbody#tbody
                            tr(al-repeat="field in data.fields")
                                td {< field.key >}
                                //td: input(al-value="field.value"
                                //    type="{< field.type >}"
                                //    al-change="field.update(field)")
                                td(al-append-tag='funcs.globals.get_field_tag(field)')

                .row: .col-lg-12
                    label Пуск
                    select.form-control(al-value='data.execution')
                        option(al-repeat='exec in executions'
                            value="{< exec.get('id') >}"
                            al-selected="data.execution==exec.get('id')")
                            | {< exec.get('id') >}

                .row: .col-lg-12
                    label Время
                    input.form-control(type='number', step='1', al-value='data.time'
                        al-change='funcs.objects.emit_index()', al-element='&time')

                .row: .col-lg-12
                    .row: .col-lg-12: label Управление
                    button.btn.btn-default(al-click='funcs.globals.clone()') Клонировать
                    button.btn.btn-default(al-click='funcs.globals.rewrite()') Перезаписать
                    .row: .col-lg-12
                    button.btn.btn-default(al-click='funcs.globals.launch()') Пуск
                    button.btn.btn-default(al-click='funcs.globals.stop()') Стоп
                    .row: .col-lg-12
                    button.btn.btn-default(al-click='funcs.globals.record()') Запись
                    button.btn.btn-default(al-click='funcs.globals.stop_record()') Остановить
