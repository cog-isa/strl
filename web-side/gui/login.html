<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./static/style/login.css">
    <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>    
</head>

<body>
<div align="center">
    <div class="info-box">
        <form id="f-login" class="login-form" action="/foo">
            <input name="login" type="text" placeholder="Логин"><br>
            <input name="password" type="password" placeholder="Пароль"><br>
            <!--<label><input type="checkbox" name="remember-me">Запомнить меня</label><br>-->
            <input id="b-login" class="button" type="submit" value="Войти">
        </form>        
    </div>
    <div align="center" style="padding: 10px;">
        <span id="error" style="color:darkred; display: none">Неверный Логин/Пароль!</span>&nbsp;
    </div>
</div>

<script>
    $('#f-login').submit(function(e){
        e.preventDefault();
        e.stopImmediatePropagation();
        login();
    });
    function login() {
        $.ajax('/api/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json; charset=UTF-8'},
            contentType: 'application/json; charset=UTF-8',
            data: JSON.stringify({
                login: $('#f-login input[name=login]').val(),
                password: $('#f-login input[name=password]').val()
            })
        }).fail(function () {
            $('span#error').show();
        }).done(function () {
            window.location = '/listofproj.html';
        });
    }    
</script>
</body>
</html>