/**
 * Angular Light 0.12.5
 * (c) 2015 Oleg Nechaev
 * Released under the MIT License.
 * 2016-01-05, http://angularlight.org/ 
 */!function(){function e(){var e={filters:{},text:{},ctrl:{},core:{},utils:{},d:{al:{},bo:{}},hooks:{directive:[],binding:[]}},t={};e.f$=t,e.directives=e.d,e.controllers=e.ctrl;var n=function(e,t){var n=e.indexOf(t);n>=0?e.splice(n,1):console.warn("trying to remove not exist item")};!function(){t.before=function(e,t){var n=e.parentNode;n.insertBefore(t,e)},t.after=function(e,t){var n=e.parentNode,r=e.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)},t.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},t.on=function(e,t,n){e.addEventListener(t,n,!1)},t.off=function(e,t,n){e.removeEventListener(t,n,!1)},t.isFunction=function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)},t.isObject=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},t.isElement=function(e){return e instanceof HTMLElement},t.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},t.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},t.ready=function(){function e(){r=!0,t.off(document,"DOMContentLoaded",e);for(var i=0;i<n.length;i++)n[i]();n.length=0}var n=[],r=!1;return t.on(document,"DOMContentLoaded",e),function(e){r?e():n.push(e)}}(),t.rawAjax=function(e){var t=new XMLHttpRequest;t.open(e.type||"GET",e.url,!0,e.username,e.password);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);e.success&&(t.onload=function(){t.status>=200&&t.status<400?e.success(t.responseText):e.error&&e.error()}),e.error&&(t.onerror=e.error),t.send(e.data||null)},t.ajaxCache={},t.ajax=function(e){if(e.username||e.password||e.headers||e.data||!e.cache)return rawAjax(e);var n=e.type||"GET",r=n+":"+e.url,i=t.ajaxCache[r];return i||(t.ajaxCache[r]=i={callback:[]}),i.result?void(e.success&&e.success(i.result)):(i.callback.push(e),void(i.loading||(i.loading=!0,t.rawAjax({type:n,url:e.url,success:function(e){i.loading=!1,i.result=e;for(var t=0;t<i.callback.length;t++)i.callback[t].success&&i.callback[t].success(e);i.callback.length=0},error:function(){i.loading=!1;for(var e=0;e<i.callback.length;e++)i.callback[e].error&&i.callback[e].error();i.callback.length=0}}))))},function(){var e='@charset "UTF-8";[al-cloak],.al-hide{display:none !important;}',t=document.querySelectorAll("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}()}();var r,i,o,a,l,c,s,u,f,p,h,d;e.ChangeDetector=function(e){var t,n;return n=new i,t=new r(n,e||{}),n.topCD=t,t},u=function(){var e,n;return t.isFunction(window.Map)?(n=new Map,{set:function(e){n.set(e,!0)},get:function(e){return n.size?n.get(e):!1},clear:function(){n.clear()}}):(e=[],{set:function(t){e.push(t)},get:function(t){return e.length?e.indexOf(t)>=0:!1},clear:function(){e.length=0}})},i=function(){return this.watchers={any:[],finishBinding:[],finishScan:[],finishScanOnce:[],onScanOnce:[]},this.status=null,this.extraLoop=!1,this.finishBinding_lock=!1,this.lateScan=!1,this.topCD=null,this.skippedWatches=u(),this},i.prototype.destroy=function(){return this.watchers.any.length=0,this.watchers.finishBinding.length=0,this.watchers.finishScan.length=0,this.watchers.finishScanOnce.length=0,this.watchers.onScanOnce.length=0,this.topCD?this.topCD.destroy():void 0},r=function(e,t){return this.scope=t,this.root=e,this.watchList=[],this.destroy_callbacks=[],this.parent=null,this.children=[],this.rwatchers={any:[],finishScan:[]},this},r.prototype["new"]=function(e){var t,n;return n=this,t=new r(n.root,e||n.scope),t.parent=n,n.children.push(t),t},r.prototype.destroy=function(){var e,t,r,i,o,a,l,c,s,u,f,p,h,d,v,m,g,y,w,$,b;for(e=this,$=e.root,e.scope=null,e.parent&&n(e.parent.children,e),v=e.children.slice(),o=0,c=v.length;c>o;o++)t=v[o],t.destroy();for(m=e.destroy_callbacks,a=0,s=m.length;s>a;a++)(i=m[a])();for(e.destroy_callbacks.length=0,g=e.watchList,l=0,u=g.length;u>l;l++)r=g[l],r.onStop&&r.onStop();for(e.watchList.length=0,y=e.rwatchers.any,h=0,f=y.length;f>h;h++)b=y[h],n($.watchers.any,b);for(e.rwatchers.any.length=0,w=e.rwatchers.finishScan,d=0,p=w.length;p>d;d++)b=w[d],n($.watchers.finishScan,b);e.rwatchers.finishScan.length=0,$.topCD===e&&($.topCD=null,$.destroy())},l=function(t,n){var r,i,o;if(r=!1,o=n.scope,o.$ns&&o.$ns.filters&&(i=o.$ns.filters[t],i||o.$ns.inheritGlobal||(r=!0)),i||r||(i=e.filters[t]),!i)throw"Filter not found: "+t;return i},s=function(){var e,t;return t=1,e=function(){return"wf"+t++},function(e,t,n,r){var i,o,a,c,s,u,f,p,h,d,v,m,g;for(d=e.root,m=r.isArray?"array":r.deep?"deep":"simple",p=n,h=t.filters.length,f=[];h>0;)a=t.filters[--h].trim(),u=a.indexOf(":"),u>0?(c=a.slice(0,+(u-1)+1||9e9),o=a.slice(u+1)):(c=a,o=null),s=l(c,e),Object.keys(s.prototype).length?(i=new s(o,e.scope,{setValue:p,changeDetector:e}),i.setValue=p,i.watchMode&&(m=i.watchMode),i.onStop&&f.push(i.onStop.bind(i)),i.onChange&&(p=i.onChange.bind(i))):p=function(e,t,n,r){return function(i){return t(e(i,n,r.scope))}}(s,p,o,e);return g={oneTime:r.oneTime,onStop:function(){var e,t,n;for(t=0,n=f.length;n>t;t++)(e=f[t])();return f.length=0}},"array"===m?g.isArray=!0:"deep"===m&&(g.deep=!0),v=e.watch(t.expression,p,g)}}(),o=function(e){return this.cb=e},h=function(e,t,r){var i,a;return i=e.root,a=new o(r),e.rwatchers[t].push(a),i.watchers[t].push(a),{stop:function(){return n(e.rwatchers[t],a),n(i.watchers[t],a)}}},d=function(){},r.prototype.watch=function(r,i,o){var l,c,u,f,p,v,m,g,y,w;if(o=o||{},o===!0&&(o={isArray:!0}),o.init&&console.warn("watch.init is depticated"),l=this,y=l.root,w=l.scope,t.isFunction(r))f=r,m=e.utils.getId(),p=!0;else{if(p=!1,f=null,r=r.trim(),"::"===r.slice(0,2)&&(r=r.slice(2),o.oneTime=!0),m=r,"$any"===m)return h(l,"any",i);if("$finishScan"===m)return h(l,"finishScan",i);if("$finishScanOnce"===m)return y.watchers.finishScanOnce.push(i);if("$onScanOnce"===m)return y.watchers.onScanOnce.push(i);if("$destroy"===m)return l.destroy_callbacks.push(i);if("$finishBinding"===m)return y.watchers.finishBinding.push(i);m=o.deep?"d#"+m:o.isArray?"a#"+m:"v#"+m}if(e.debug.watch&&console.log("$watch",r),v=!1,!p)if(o.watchText)f=o.watchText.fn;else{if(c=e.utils.compile.expression(r),c.filters)return s(l,c,i,o);v=c.isSimple&&0===c.simpleVariables.length&&!o.isArray,f=c.fn}return o.deep&&(o.isArray=!1),u={isStatic:v,isArray:Boolean(o.isArray),extraLoop:!o.readOnly,deep:o.deep,value:d,callback:i,exp:f,src:""+r,onStop:o.onStop||null,el:o.element||null,ea:o.elementAttr||null},v?l.watch("$onScanOnce",function(){return a(w,u,u.exp(w))}):l.watchList.push(u),g={$:u,stop:function(){return u.isStatic?void 0:(n(l.watchList,u),o.onStop?o.onStop():void 0)}},o.oneTime&&(u.callback=function(e){return void 0!==e?(g.stop(),i(e)):void 0}),g},c=function(){return window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()}}(),f=function(e,t){var n,r,i,o,a,l;if(null===e||null===t)return!0;if(o=typeof e,a=typeof t,o!==a)return!0;if("object"===o){if(e.length!==t.length)return!0;for(n=r=0,i=e.length;i>r;n=++r)if(l=e[n],l!==t[n])return!0}return!1},a=function(e,t,n){t.el?t.ea?t.el.setAttribute(t.ea,n):t.el.nodeValue=n:t.callback.call(e,n)},p=function(t,n){var r,i,o,a,l,c,s,u,p,h,v,m,g,y,w,$,b;if(g=t.root,l=!1,a=0,w=0,t){for(v=[],c=0,o=t;o;){for(y=o.scope,w+=o.watchList.length,m=o.watchList.slice(),s=0,p=m.length;p>s;s++)b=m[s],n.src=b.src,u=b.value,$=b.exp(y),u!==$&&(h=!1,b.isArray?(r=Array.isArray(u),i=Array.isArray($),r===i?r?f(u,$)&&(h=!0,b.value=$.slice()):(h=!0,b.value=$):(h=!0,b.value=i?$.slice():$)):b.deep?e.utils.equal(u,$)||(h=!0,b.value=e.utils.clone($)):(h=!0,b.value=$),h&&(h=!1,a++,b.el?b.ea?b.el.setAttribute(b.ea,$):b.el.nodeValue=$:g.skippedWatches.get(b)||(u===d&&(u=void 0),"$scanNoChanges"!==b.callback.call(y,$,u)&&b.extraLoop&&(l=!0))),e.debug.scan>1&&console.log("changed:",b.src));v.push.apply(v,o.children),o=v[c++]}n.total=w,n.changes=a,n.extraLoop=l}},r.prototype.digest=function(){var t,n,r,i,o,a,l,s,u,f;u=this.root,a=10,f=0;try{for(s={total:0,changes:0,extraLoop:!1,src:""};a;){if(a--,u.extraLoop=!1,u.watchers.onScanOnce.length)for(l=u.watchers.onScanOnce.slice(),u.watchers.onScanOnce.length=0,i=0,o=l.length;o>i;i++)t=l[i],t.call(u);if(p(this,s),f+=s.changes,!s.extraLoop&&!u.extraLoop)break}e.debug.scan&&(n=c()-start,console.log("$scan: loops: ("+(10-a)+"), last-loop changes: "+s.changes+", watches: "+s.total+" / "+n+"ms"))}catch(h){r=h,e.exceptionHandler(r,"$scan, error in expression: "+s.src,{src:s.src,result:s})}return s.mainLoop=a,s.totalChanges=f,s},r.prototype.scan=function(n){var r,i,o,a,l,s,u,f,p,h,d,v,m,g;if(m=this.root,n=n||{},t.isFunction(n)&&(n={callback:n}),n.callback&&m.watchers.finishScanOnce.push(n.callback),n.skipWatch&&m.skippedWatches.set(n.skipWatch.$),n.late){if(m.lateScan)return;return m.lateScan=!0,void e.nextTick(function(){return m.lateScan?m.topCD.scan():void 0})}if("scaning"===m.status)return void(m.extraLoop=!0);if(m.lateScan=!1,m.status="scaning",e.debug.scan&&(g=c()),v=m.topCD?m.topCD.digest():{},v.totalChanges)for(h=m.watchers.any,a=0,u=h.length;u>a;a++)(i=h[a])();for(m.status=null,m.skippedWatches.clear(),d=m.watchers.finishScan,l=0,f=d.length;f>l;l++)(r=d[l])();for(o=m.watchers.finishScanOnce.slice(),m.watchers.finishScanOnce.length=0,s=0,p=o.length;p>s;s++)r=o[s],r.call(m);if(0===v.mainLoop)throw"Infinity loop detected";return v},e.core.ChangeDetector=r,r.prototype.compile=function(t,n){return e.utils.compile.expression(t,n).fn},r.prototype.setValue=function(t,n){var r,i,o,a,l,c,s,u,f,p;r=this,o=r.compile(t+" = $value",{input:["$value"],no_return:!0});try{return o(r.scope,n)}catch(h){if(i=h,s="can't set variable: "+t,e.debug.parser&&console.warn(s),(""+i).indexOf("TypeError")>=0&&(f=t.match(/^([\w\d\.]+)\.[\w\d]+$/),f&&f[1])){for(p=r.scope,u=f[1].split("."),a=0,c=u.length;c>a;a++)l=u[a],void 0===p[l]&&(p[l]={}),p=p[l];try{return void o(r.scope,n)}catch(h){}}return e.exceptionHandler(i,s,{name:t,value:n})}},r.prototype.eval=function(e){var t;return(t=this.compile(e))(this.scope)},r.prototype.getValue=function(e){return this.eval(e)};var v;v=function(t){var n,r;if(this instanceof v)return this;if(t=t||{},t.data)if(r=t.data,Object.setPrototypeOf)Object.setPrototypeOf(r,v.prototype);else for(n in v.prototype)r[n]=v.prototype[n];else r=new v;return r.$rootChangeDetector=void 0!==t.changeDetector?t.changeDetector:e.ChangeDetector(r),r.$changeDetector=null,r},e.Scope=v,e.core.Scope=v,v.prototype.$watch=function(t,n,r){var i;return i=r&&r.changeDetector?r.changeDetector:this.$changeDetector,i||this.$rootChangeDetector.children.length||(i=this.$rootChangeDetector),i?i.watch(t,n,r):void e.exceptionHandler("","You can do $watch during binding only: "+t,{name:t,option:r,scope:this})},v.prototype.$scan=function(e){var t;return t=this.$rootChangeDetector,t.scan(e)},v.prototype.$setValue=function(e,t){var n;n=this.$rootChangeDetector,n.setValue(e,t)},v.prototype.$getValue=function(e,t){var n;return n=this.$rootChangeDetector,n.getValue(e,t)},v.prototype.$eval=function(e){var t;return t=this.$rootChangeDetector,t.eval(e)},v.prototype.$compile=function(e,t){var n;return n=this.$rootChangeDetector,n.compile(e,t)},v.prototype.$destroy=function(){var e;e=this.$rootChangeDetector,e.destroy()},v.prototype.$new=function(){var e;return e=new v({changeDetector:null}),e.$rootChangeDetector=this.$changeDetector["new"](e),e.$parent=this,e},function(){var t,n;return t=function(){var e;return e=0,function(){return e++,"wt"+e}}(),e.text.$base=function(t){var n,r,i,o,a;if(o=t.point,n=t.cd,a=n.scope,r=a.$ns&&a.$ns.text?a.$ns.text[t.name]:e.text[t.name],!r)throw"No directive alight.text."+t.name;return i={changeDetector:n,setter:function(e){return o.value=null===e?"":""+e,t.update()},"finally":function(e){return o.value=null===e?"":""+e,o.type="text",t["finally"]()}},a.$changeDetector=n,r(i.setter,t.exp,a,i),a.$changeDetector=null},n=function(t,n,r){var i,o,l,c,s,u,f,p,h,d,v,m,g,y,w,$,b,x,k,D,C,_,T;if(r=r||{},o=this,e.debug.watchText&&console.log("$watchText",t),D=e.utils.compile.buildSimpleText(t,null))return void o.watch(t,n,{watchText:D,element:r.element,elementAttr:r.elementAttr});for(s=e.utils.parsText(t),T=0,i=!0,b=!1,f=u=function(){},v=0,g=s.length;g>v;v++)if(c=s[v],"expression"===c.type)if(p=c.list.join(" | "),w=p.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/))$=w[1],"#"===$?(d=p.indexOf(" "),0>d?($=p.substring(1),p=""):($=p.slice(1,d),p=p.slice(d))):p=p.substring($.length),e.text.$base({name:$,exp:p,cd:o,point:c,update:function(){return f()},"finally":function(){return f(),u()}}),b=!0,"text"!==c.type&&(T++,i=!1);else if(l=e.utils.compile.expression(p,{string:!0}),l.filters)T++,i=!1,function(e){return o.watch(p,function(t){return null==t&&(t=""),e.value=t,f()})}(c);else{if(c.fn=l.fn,!l.rawExpression)throw"Error";l.isSimple&&0===l.simpleVariables.length?(c.type="text",c.value=c.fn()):(c.re=l.rawExpression,T++)}if(!T){for(C="",m=0,y=s.length;y>m;m++)c=s[m],C+=c.value;return void o.watch("$onScanOnce",function(){return a(o.scope,{callback:n,el:r.element,ea:r.elementAttr},C)})}return i?(D=b?e.utils.compile.buildSimpleText(null,s):e.utils.compile.buildSimpleText(t,s),void o.watch(t,n,{watchText:{fn:D.fn},element:r.element,elementAttr:r.elementAttr})):(_=null,k="",s.scope=o.scope,h=e.utils.compile.buildText(t,s),f=function(){return k=h()},u=function(){var e,t;for(d=!0,e=0,t=s.length;t>e;e++)if(c=s[e],"expression"===c.type){d=!1;break}return d?(o.watch("$finishScanOnce",function(){return _.stop()}),r.onStatic?r.onStatic():void 0):void 0},x=function(){return k},f(),void(_=o.watch(x,n,{element:r.element,elementAttr:r.elementAttr})))},r.prototype.watchText=n,v.prototype.$watchText=function(t,n,r){var i;i=this.$changeDetector,i||this.$rootChangeDetector.children.length||(i=this.$rootChangeDetector),i?i.watchText(t,n,r):e.exceptionHandler("","You can do $watchText during binding only: "+t,{expression:t,option:r,scope:this})}}();var m,g,y,w,$,b,x;e.version="0.12.5",e.debug={scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},e.directivePreprocessor=function(n,r){var i,o,a,l,c,s,u,f,p;if(c="data-"===n.slice(0,5)?n.slice(5):n,a=c.indexOf(":"),0>a&&(a=c.indexOf("-")),0>a)return{noNs:!0};if(s=c.substring(0,a),c=c.substring(a+1).replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),f=null,i=r.cd.scope.$ns,i&&i.directives)if(u=i.directives[s]){if(f=u[c],!f&&!i.inheritGlobal)return{noDirective:!0}}else if(!i.inheritGlobal)return{noNs:!0};if(!f){if(u=e.d[s],!u)return{noNs:!0};if(f=u[c],!f)return{noDirective:!0}}if(o={},t.isFunction(f))o.init=f;else{if(!t.isObject(f))throw"Wrong directive: "+s+"."+c;for(l in f)p=f[l],o[l]=p}if(o.priority=f.priority||0,o.restrict=f.restrict||"A",o.restrict.indexOf(r.attr_type)<0)throw"Directive has wrong binding (attribute/element): "+c;return o.$init=function(t,n,i,a){var l,u;l=function(){var e,t,n,r,i;for(n=u.procLine,t=i=0,r=n.length;r>i;t=++i)if(e=n[t],e.fn.call(u),u.isDeferred){u.procLine=n.slice(t+1);break}return null},u={element:n,value:i,cd:t,env:a,ns:s,name:c,args:r,directive:o,isDeferred:!1,procLine:e.hooks.directive,makeDeferred:function(){return u.isDeferred=!0,u.env.stopBinding=!0,u.doBinding=!0,function(){return u.isDeferred=!1,l()}}},o.stopBinding&&(u.env.stopBinding=!0),l()},o},function(){var n;return n=e.hooks.directive,n.push({code:"init",fn:function(){var t;this.directive.init&&(e.debug.directive&&this.directive.scope&&console.warn(this.ns+"-"+this.name+" uses scope and init together, probably you need use link instead of init"),this.env.changeDetector=this.cd,this.cd.scope.$changeDetector=this.cd,t=this.directive.init(this.cd.scope,this.element,this.value,this.env),t&&t.start&&t.start(),this.cd.scope.$changeDetector=null)}}),n.push({code:"templateUrl",fn:function(){var e,n;n=this,this.directive.templateUrl&&(e=this.makeDeferred(),t.ajax({cache:!0,url:this.directive.templateUrl,success:function(t){return n.directive.template=t,e()},error:e}))}}),n.push({code:"template",fn:function(){var e;this.directive.template&&(1===this.element.nodeType?this.element.innerHTML=this.directive.template:8===this.element.nodeType&&(e=document.createElement("p"),e.innerHTML=this.directive.template.trim(),e=e.firstChild,t.after(this.element,e),this.element=e,this.doBinding=!0))}}),n.push({code:"scope",fn:function(){var t,n,r;if(this.directive.scope){switch(n=this.cd,r=e.Scope({changeDetector:null}),this.directive.scope){case!0:t=n["new"](r);break;case"root":t=e.ChangeDetector(r),n.watch("$destroy",function(){return t.destroy()});break;default:throw"Wrong scope value: "+this.directive.scope}this.env.parentChangeDetector=n,r.$parent=n.scope,r.$rootChangeDetector=t,this.cd=t,this.env.stopBinding=!0,this.doBinding=!0}}}),n.push({code:"link",fn:function(){var e;this.directive.link&&(this.env.changeDetector=this.cd,this.cd.scope.$changeDetector=this.cd,e=this.directive.link(this.cd.scope,this.element,this.value,this.env),e&&e.start&&e.start(),this.cd.scope.$changeDetector=null)}}),n.push({code:"scopeBinding",fn:function(){this.doBinding&&e.bind(this.cd,this.element,{skip_attr:this.env.skippedAttr()})}})}(),x=function(){var t;return t=function(e,t,n){var r;"A"===t.attr_type?(r=n||{},r.priority=-5,r.is_attr=!0,r.name=e,r.attrName=e,r.element=t.element,t.list.push(r)):"M"===t.attr_type&&t.list.push(n)},function(n,r){var i;return r.skip_attr.indexOf(n)>=0?t(n,r,{skip:!0}):(i=e.directivePreprocessor(n,r),i.noNs?void t(n,r):i.noDirective?void t(n,r,{noDirective:!0}):void r.list.push({name:n,directive:i,priority:i.priority,attrName:n}))}}(),b=function(e,t){return e.priority===t.priority?0:e.priority>t.priority?-1:1},m=function(t,n,r,i){var o;return o=r,o.indexOf(e.utils.pars_start_tag)<0?void 0:(t.watchText(o,null,{element:n,elementAttr:i}),!0)},$=function(t,n){var r;return r=n.data,r.indexOf(e.utils.pars_start_tag)<0?void 0:(t.watchText(r,null,{element:n}),!0)},g=function(t,n){var r,i,o,a,l,c,s,u,f,p;if(f=n.nodeValue.trim(),"directive:"===f.slice(0,10)){if(f=f.slice(10).trim(),s=f.indexOf(" "),s>=0?(o=f.slice(0,+(s-1)+1||9e9),p=f.slice(s+1)):(o=f,p=""),r={list:u=[],element:n,attr_type:"M",cd:t,skip_attr:[]},x(o,r),i=u[0],i.noDirective)throw"Comment directive not found: "+o;a=i.directive,c={element:n,attrName:o,attributes:[],skippedAttr:function(){return[]}},e.debug.directive&&console.log("bind",i.attrName,p,i);try{a.$init(t,n,p,c)}catch(h){l=h,e.exceptionHandler(l,"Error in directive: "+i.name,{value:p,env:c,cd:t,scope:t.scope,element:n})}return c.skipToElement?{directive:1,skipToElement:c.skipToElement}:{directive:1,skipToElement:null}}},y=function(){var t,n;return n=function(e,t){var n,r,i,o,a;for(1===arguments.length&&(t=!0),o=this.attributes,i=0,r=o.length;r>i;i++)if(n=o[i],n.attrName===e)return t&&(n.skip=!0),a=this.element.getAttribute(e),a||!0},t=function(){var e,t,n,r,i;for(r=this.attributes,i=[],n=0,t=r.length;t>n;n++)e=r[n],e.skip&&i.push(e.attrName);return i},function(r,i,o){var a,l,c,s,u,f,p,h,d,v,g,y,$,k,D,C,_,T,S,A,B,M,O,N,j;if(u={directive:0,text:0,attr:0,hook:0,skipToElement:null},o=o||{},M=!1,N=o.skip_attr||[],N instanceof Array||(N=[N]),!o.skip_top){for(a={list:D=[],element:i,skip_attr:N,attr_type:"E",cd:r},c=i.nodeName.toLowerCase(),x(c,a),a.attr_type="A",A=i.attributes,C=0,y=A.length;y>C;C++)l=A[C],x(l.name,a);if(o.attachDirective){B=o.attachDirective;for(c in B)s=B[c],x(c,a)}for(D=D.sort(b),_=0,$=D.length;$>_;_++)if(h=D[_],!h.skip){if(h.noDirective)throw"Directive not found: "+h.name;if(h.skip=!0,j=o.attachDirective&&o.attachDirective[h.attrName]?o.attachDirective[h.attrName]:i.getAttribute(h.attrName),h.is_attr)m(r,i,j,h.attrName)&&u.attr++;else{u.directive++,d=h.directive,g={element:i,attrName:h.attrName,attributes:D,takeAttr:n,skippedAttr:t,stopBinding:!1},e.debug.directive&&console.log("bind",h.attrName,j,h);try{d.$init(r,i,j,g)}catch(E){v=E,e.exceptionHandler(v,"Error in directive: "+h.attrName,{value:j,env:g,cd:r,scope:r.scope,element:i})}if(g.stopBinding){M=!0;break}g.skipToElement&&(u.skipToElement=g.skipToElement)}}}if(!M)for(O=null,p=function(){var e,t,n,r;for(n=i.childNodes,r=[],t=0,e=n.length;e>t;t++)f=n[t],r.push(f);return r}(),T=0,k=p.length;k>T;T++)f=p[T],f&&(O?O===f&&(O=null):(S=w(r,f),u.directive+=S.directive,u.text+=S.text,u.attr+=S.attr,u.hook+=S.hook,O=S.skipToElement));return u}}(),w=function(t,n,r){var i,o,a,l,c,s;if(s={directive:0,text:0,attr:0,hook:0,skipToElement:null},e.hooks.binding.length)for(c=e.hooks.binding,a=0,o=c.length;o>a;a++)if(i=c[a],s.hook+=1,l=i.fn(t,n,r),l&&l.owner)return s;return 1===n.nodeType?(l=y(t,n,r),s.directive+=l.directive,s.text+=l.text,s.attr+=l.attr,s.hook+=l.hook,s.skipToElement=l.skipToElement):3===n.nodeType?$(t,n,r)&&s.text++:8===n.nodeType&&(l=g(t,n,r),l&&(s.directive+=l.directive,s.skipToElement=l.skipToElement)),s},e.nextTick=function(){var t,n,r;return r=null,n=[],t=function(){var t,i,o,a,l,c,s;for(r=null,i=n.slice(),n.length=0,c=0,l=i.length;l>c;c++){a=i[c],t=a[0],s=a[1];try{t.call(s)}catch(u){o=u,e.exceptionHandler(o,"$nextTick, error in function",{fn:t,self:s})}}return null},function(e){return n.push([e,this]),r?void 0:r=setTimeout(t,0)}}(),e.bind=e.applyBindings=function(t,n,r){var i,o,a,l,c,s,u,f;if(!n)throw"No element";if(!t)throw"No Scope";if(r=r||{},o=t instanceof e.core.ChangeDetector?t:r.changeDetector||t.$changeDetector||t.$rootChangeDetector,f=o.root,a=!f.finishBinding_lock,a&&(f.finishBinding_lock=!0,f.bindingResult={directive:0,text:0,attr:0,hook:0}),u=w(o,n,r),f.bindingResult.directive+=u.directive,f.bindingResult.text+=u.text,f.bindingResult.attr+=u.attr,f.bindingResult.hook+=u.hook,o.digest(),a){for(f.finishBinding_lock=!1,c=f.watchers.finishBinding.slice(),f.watchers.finishBinding.length=0,s=0,l=c.length;l>s;s++)(i=c[s])();u.total=f.bindingResult}return u},e.bootstrap=function(n,r){var i,o,a,l,c,s,u,f;if(!n)return e.bootstrap("[al-app]"),void e.bootstrap("[al\\:app]");if("string"==typeof n?n=document.querySelectorAll(n):t.isElement(n)&&(n=[n]),Array.isArray(n)||"number"==typeof n.length){for(a=null,r&&(s=e.Scope({data:r})),c=0,l=n.length;l>c;c++)o=n[c],o.ma_bootstrapped||(o.ma_bootstrapped=!0,f=s?s:e.Scope(),u={skip_attr:["al-app","al:app"]},i=o.getAttribute("al-app")||o.getAttribute("al:app"),i&&(u.attachDirective={"al-ctrl":i}),e.bind(f,o,u),a=f);return a}e.exceptionHandler("Error in bootstrap","Error input arguments",{input:n})};var k,D;e.utils.getId=function(){var e,t;return t=function(){var e,t,n,r,i,o;for(o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";n>0;)e=Math.floor(n/62),r=62*e,t=n-r,n=e,i=o[t]+i;return i}(),e=1,function(){return t+"#"+e++}}(),e.utils.clone=k=function(e){var t,n,r,i;if(!e)return e;if("object"==typeof e){if(e instanceof Array)return r=function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(k(t));return i}();if(e instanceof Date)return new Date(e.valueOf());if(e.nodeType&&"function"==typeof e.cloneNode)return e;r={};for(n in e)i=e[n],"$"!==n[0]&&(r[n]=k(i));return r}return e},e.utils.equal=D=function(e,t){var n,r,i,o,a,l,c,s;if(!e||!t)return e===t;if(l=typeof e,c=typeof t,l!==c)return!1;if("object"===l){if(e instanceof Array){if(e.length!==t.length)return!1;for(n=r=0,o=e.length;o>r;n=++r)if(s=e[n],!D(s,t[n]))return!1;return!0}if(e instanceof Date)return e.valueOf()===t.valueOf();if(e.nodeType&&"function"==typeof e.cloneNode)return e===t;a={};for(i in e)if(s=e[i],"$"!==i[0]&&(a[i]=!0,!D(s,t[i])))return!1;for(i in t)if(s=t[i],"$"!==i[0]&&!a[i]&&!D(s,e[i]))return!1;return!0}return e===t},e.exceptionHandler=function(e,t,n){var r;return console.warn(t+"\n",(e.message||"")+"\n",n),r="string"==typeof e?e:e.stack,console.error(r)},function(){var t,n,r,i,o,a;return a=function(){var e,t,n,r;for(r={},e=0,n=arguments.length;n>e;e++)t=arguments[e],r[t]=!0;return r},o=a("instanceof","typeof","in","null","true","false","undefined","return"),n=function(){var e;return e=/[a-zA-Z\u0410-\u044F\u0401\u0451_\.\$]/,function(t){return t.match(e)}}(),r=function(e){return e.charCodeAt()>=48&&e.charCodeAt()<=57},i=function(){var e;return e=a("+","-",">","<","=","&","|","^","!","~"),function(t){return e[t]||!1}}(),t=a("=","+=","-=","++","--","|=","^=","&=","!=","<<=",">>="),e.utils.parsExpression=function(a,l){var c,s,u,f,p,h,d,v;return l=l||{},u=l.input||[],v=1,f=function(e){var o,a,l,c,s,u,p,h,d,m,g,y,w,$,b,x,k,D,C,_,T;for(y=e.line,$=e.result||[],d=e.index||0,g=e.level||0,k=e.stopKey||null,_="",m=null,T=[],b="",x=!1,w="",D="",C="",h="",c=0,p=null,u=function(){return h&&$.push({type:"free",value:h}),h=""};d<=y.length;)if(l=y[d-1],o=y[d++]||"",a=y[d],(x&&h||!o)&&u(),"string"!==x){if("key"===x){if(n(o)||r(o)){_+=o;continue}if("["===o){if(_+=o,s=f({line:y,index:d,level:g+1,stopKey:"]"}),!s.stopKeyOk)throw"Error expression";d=s.index,_+="###"+s.uniq+"###]",T.push(s);continue}m={type:"key",value:_,start:d-_.length-1,finish:d-1,children:T},$.push(m),x="",_="",T=[]}else if("sign"===x){if(i(o)){b+=o;continue}if("|"===b&&0===g&&0===c){p=y.substring(d-1),d=y.length+1;continue}t[b]&&(m.assignment=!0),$.push({type:"sign",value:b}),x="",b=""}if(n(o))x="key",_+=o;else if(i(o))x="sign",b+=o;else if('"'!==o&&"'"!==o){if(o===k)return u(),{result:$,index:d,stopKeyOk:!0,uniq:v++};"("===o&&(m&&(m["function"]=!0),c++),")"===o&&c--,"{"!==o?(":"===o&&"}"===k&&(m.type="free"),h+=o):(u(),s=f({line:y,index:d,level:g+1,stopKey:"}"}),$.push({type:"{}",child:s}),d=s.index)}else D=o,x="string",C+=o}else{if(o===D&&"\\"!==l){C+=o,$.push({type:"string",value:C}),C="",D="",x="";continue}C+=o}return u(),{result:$,index:d,filters:p}},s=f({line:a}),p={isSimple:!s.filters,simpleVariables:[]},s.filters?(p.expression=a.substring(0,a.length-s.filters.length),p.filters=s.filters.split("|")):p.expression=a,h=function(e){var t,n,r,i,o;if(e.indexOf(".")<0&&e.indexOf("[")<0)return[e];for(o=[],r=0,i="",n=function(){return i?(o.push(i),i=""):void 0};r<e.length;)t=e[r++],"."!==t?("["===t&&n(),"]"!==t?i+=t:(i+=t,n())):n();return n(),o},d=function(e){return"["!==e[0]?"."+e:e},c=function(e){var t,n,r,i,a,l,s,f,v,m,g,y,w,$,b,x,k,D,C,_;for(C="",b=e.result,i=0,f=b.length;f>i;i++)if(r=b[i],"key"!==r.type)C+="{}"!==r.type?r.value:"{"+c(r.child)+"}";else{if(r.assignment)_=h(r.value),$="this"===_[0]?"$$scope"+r.value.substring(4):_.length<2?"($$scope.$root || $$scope)."+r.value:"$$scope."+r.value,p.isSimple=!1;else if(_=h(r.value),o[_[0]])$=r.value;else if(u.indexOf(_[0])>=0)$=r.value,p.simpleVariables.push($);else if("this"===_[0])$="$$scope"+r.value.substring(4),p.simpleVariables.push($);else if(r["function"])if(p.isSimple=!1,_.length<3)$="$$scope."+r.value;else{for($="($$=$$scope."+_[0]+",$$==null)?undefined:",x=_.slice(1,-2),s=0,v=x.length;v>s;s++)a=x[s],$+="($$=$$."+a+",$$==null)?undefined:";$="("+$+"$$."+_[_.length-2]+")."+_[_.length-1]}else{if(_.length<2)$="$$scope."+r.value;else{for($="($$=$$scope"+d(_[0])+",$$==null)?undefined:",k=_.slice(1,-1),y=0,m=k.length;m>y;y++)a=k[y],$+="($$=$$"+d(a)+",$$==null)?undefined:";$="("+$+"$$"+d(_[_.length-1])+")"}p.simpleVariables.push($)}if(r.children.length)for(D=r.children,w=0,g=D.length;g>w;w++)t=D[w],l="###"+t.uniq+"###",n=c(t),$=$.split(l).join(n);C+=$}return C},p.result=c(s),e.debug.parser&&console.log(a,p),p}}(),function(){var t,n,r;return e.utils.pars_start_tag="{{",e.utils.pars_finish_tag="}}",r=function(t){var n,r,i,o,a,l,c,s,u;return u=e.utils.pars_start_tag,r=e.utils.pars_finish_tag,c=[],o=0,l=0,i=function(e){var n;return e=e||1,n=t.substring(l,o-e),l=o,n},s=null,a=function(e,n,l){var u,f,p,h;for(e||(s={type:"expression",list:[]},c.push(s)),h=null,u=null;o<t.length;){if(h=u,u=t[o],o+=1,f=h+u,p=t[o],u===n)return;if(!l){if(f===r&&0===e)return s.list.push(i(2)),!0;"("===u?a(e+1,")"):"{"===u?a(e+1,"}"):'"'===u?a(e+1,'"',!0):"'"===u?a(e+1,"'",!0):"|"===u&&0===e&&("|"===p?o+=1:s.list.push(i()))}}},n=function(){var e,n,r,l,s;for(r=null,e=null;o<t.length;)if(r=e,e=t[o],o+=1,n=r+e,n===u){if(s=i(2),s&&c.push({type:"text",value:s}),!a(0))throw"Wrong expression"+t;e=null}return l=i(-1),l?c.push({type:"text",value:l}):void 0},n(),e.debug.parser&&console.log("parsText",c),c},t={},n=function(e){var t,n,r;return r=function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)t=e[r],n={type:t.type,value:t.value},t.list&&(n.list=t.list.slice()),o.push(n);return o}()},e.utils.parsText=function(e){var i;return i=t[e],i||(t[e]=i=r(e)),n(i)}}(),function(){var t;return e.utils.compile=t={},t.cache={},t.Function=Function,t.expression=function(n,r){var i,o,a,l,c,s,u,f;if(r=r||{},n=n.trim(),s=n+"#",s+=r.no_return?"+":"-",s+=r.string?"s":"v",r.input&&(s+=r.input.join(",")),c=t.cache[s])return c;c=e.utils.parsExpression(n,{input:r.input}),a=c.result,u=r.no_return||!1,u?f="var $$;"+a:r.string&&!c.filters?(f="var $$, __ = ("+a+"); return '' + (__ || (__ == null?'':__))",c.rawExpression="(__="+a+") || (__ == null?'':__)"):f="var $$;return ("+a+")";try{r.input?(i=r.input.slice(),i.unshift("$$scope"),i.push(f),l=t.Function.apply(null,i)):l=t.Function("$$scope",f)}catch(p){throw o=p,e.exceptionHandler(o,"Wrong expression: "+n,{src:n,cfg:r}),"Wrong expression: "+a}return c.fn=l,t.cache[s]=c},t.cacheText={},t.buildText=function(e,n){var r,i,o,a,l,c,s;if(o=t.cacheText[e])return function(){return o.call(n)};for(s=[],l=a=0,c=n.length;c>a;l=++a)r=n[l],"expression"===r.type?s.push(r.fn?"this["+l+"].fn(this.scope)":"((x=this["+l+"].value) || (x == null?'':x))"):r.value&&(i=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),s.push('"'+i+'"'));return s=s.join(" + "),o=t.Function("var x; return ("+s+")"),t.cacheText[e]=o,function(){return o.call(n)}},t.cacheSimpleText={},t.buildSimpleText=function(e,n){var r,i,o,a,l,c,s,u,f;if(c=e?t.cacheSimpleText[e]:null,c||!n)return c||null;for(u=[],f=[],l=a=0,s=n.length;s>a;l=++a)r=n[l],"expression"===r.type?(u.push("("+r.re+")"),r.simpleVariables&&f.push.apply(f,r.simpleVariables)):r.value&&(i=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),u.push('"'+i+'"'));return u=u.join(" + "),o=t.Function("$$scope","var $$, __; return ("+u+")"),c={fn:o,simpleVariables:f},e&&(t.cacheSimpleText[e]=c),c}}();var C,_,T;T=function(e){var t,n,r,i;if(!e.length)return"el";for(i="el",n=0,r=e.length;r>n;n++)t=e[n],i+=".childNodes["+t+"]";return i},C=function(t){var n,r,i,o,a,l,c;for(i=e.utils.parsText(t),o=0,l=i.length;l>o;o++)if(r=i[o],"expression"===r.type){if(r.list.length>1)return null;if(a=r.list[0],"#"===a[0])return null;if("="===a[0])return null;if("::"===a.slice(0,2))return null;if(n=e.utils.compile.expression(a,{string:!0}),!n.rawExpression)throw"Error";r.re=n.rawExpression}return c=e.utils.compile.buildSimpleText(t,i),c.fn},e.core.fastBinding=_=function(t){var n,r,i,o;return r=this,i=[],r.fastWatchFn=[],n=[],o=function(t,a){var l,c,s,u,f,p,h,d,v,m,g,y,w,$;if(1===t.nodeType){for(m=t.attributes,f=0,d=m.length;d>f;f++)l=m[f],l.value.indexOf(e.utils.pars_start_tag)<0||($=l.value,h=l.nodeName,y=T(n),s=C($),w=$.replace(/"/g,'\\"').replace(/\n/g,"\\n"),s?(i.push("s.fw('"+w+"', "+r.fastWatchFn.length+", "+y+", '"+h+"');"),r.fastWatchFn.push(s)):i.push("s.wt('"+w+"', "+y+", '"+h+"');"));for(g=t.childNodes,u=p=0,v=g.length;v>p;u=++p)c=g[u],n.length=a+1,n[a]=u,o(c,a+1)}else if(3===t.nodeType){if(t.nodeValue.indexOf(e.utils.pars_start_tag)<0)return;$=t.nodeValue,y=T(n),s=C($),w=$.replace(/"/g,'\\"').replace(/\n/g,"\\n"),s?(i.push('s.fw("'+w+'", '+r.fastWatchFn.length+", "+y+");"),r.fastWatchFn.push(s)):i.push('s.wt("'+w+'", '+y+");")}return null},o(t,0),i=i.join("\n"),r.resultFn=e.utils.compile.Function("s","el","f$",i),this},_.prototype.bind=function(e,n){var r;r=this,r.currentCD=e,r.resultFn(r,n,t)},_.prototype.fw=function(e,t,n,r){var i,o,l,c,s;l=this,i=l.currentCD,o=l.fastWatchFn[t],c=o(i.scope),s={isStatic:!1,isArray:!1,extraLoop:!1,deep:!1,value:c,callback:null,exp:o,src:e,onStop:null,el:n,ea:r||null},i.watchList.push(s),a(i.scope,s,c)},_.prototype.wt=function(e,t,n){this.currentCD.watchText(e,null,{element:t,elementAttr:n}),this.currentCD.scan()};var S;S=function(n){return{priority:10,stopPropagation:!0,link:function(r,i,o,a){var l;
return l={stopPropagation:this.stopPropagation,callback:r.$compile(o,{no_return:!0,input:["$event"]}),start:function(){l.onDom(),l.stop=a.takeAttr("al-click-stop")},onDom:function(){t.on(i,n,l.doCallback),r.$watch("$destroy",l.offDom)},offDom:function(){t.off(i,n,l.doCallback)},doCallback:function(t){if(l.stop||(t.preventDefault(),l.stopPropagation&&t.stopPropagation()),!i.getAttribute("disabled")){try{l.callback(r,t)}catch(n){t=n,e.exceptionHandler(t,"al-click, error in expression: "+o,{name:o,scope:r,element:i})}l.stop&&r.$eval(l.stop)&&(t.preventDefault(),l.stopPropagation&&t.stopPropagation()),r.$scan()}}}}}},e.d.al.click=S("click"),e.d.al.dblclick=S("dblclick"),e.d.al.value=function(n,r,i){var o;return o={onDom:function(){t.on(r,"input",o.updateModel),t.on(r,"change",o.updateModel),n.$watch("$destroy",o.offDom)},offDom:function(){t.off(r,"input",o.updateModel),t.off(r,"change",o.updateModel)},updateModel:function(){e.nextTick(function(){var e;e=r.value,n.$setValue(i,e),n.$scan({skipWatch:o.watch})})},watchModel:function(){o.watch=n.$watch(i,o.updateDom)},updateDom:function(e){return null==e&&(e=""),r.value=e,"$scanNoChanges"},start:function(){o.onDom(),o.watchModel()}}},e.d.al.checked={priority:100,link:function(e,n,r){var i;return i={start:function(){i.onDom(),i.watchModel()},onDom:function(){t.on(n,"change",i.updateModel),e.$watch("$destroy",i.offDom)},offDom:function(){t.off(n,"change",i.updateModel)},updateModel:function(){var t;t=n.checked,e.$setValue(r,t),e.$scan({skipWatch:i.watch})},watchModel:function(){i.watch=e.$watch(r,i.updateDom)},updateDom:function(e){return n.checked=!!e,"$scanNoChanges"}}}},e.d.al["if"]={priority:700,stopBinding:!0,link:function(n,r,i,o){var a;return a={item:null,childCD:null,base_element:null,top_element:null,start:function(){a.prepare(),a.watchModel()},prepare:function(){a.base_element=r,a.top_element=document.createComment(" "+o.attrName+": "+i+" "),t.before(r,a.top_element),t.remove(r)},updateDom:function(e){e?a.insertBlock(e):a.removeBlock()},removeBlock:function(){a.childCD&&(a.childCD.destroy(),a.childCD=null,a.removeDom(a.item),a.item=null)},insertBlock:function(){a.childCD||(a.item=a.base_element.cloneNode(!0),a.insertDom(a.top_element,a.item),a.childCD=o.changeDetector["new"](),e.bind(a.childCD,a.item,{skip_attr:o.skippedAttr()}))},watchModel:function(){n.$watch(i,a.updateDom)},removeDom:function(e){t.remove(e)},insertDom:function(e,n){t.after(e,n)}}}},e.d.al.ifnot={priority:700,stopBinding:!0,link:function(t,n,r,i){var o;return o=e.d.al["if"].link(t,n,r,i),o.updateDom=function(e){e?o.removeBlock():o.insertBlock()},o}},e.directives.al.repeat={priority:1e3,restrict:"AM",stopBinding:!0,init:function(n,r,i,o){var a,l;return a=n.$changeDetector,l={start:function(){l.parsExpression(),l.prepareDom(),l.buildUpdateDom(),l.watchModel(),l.makeChildConstructor()},parsExpression:function(){var e,t;if(t=i.trim(),"("===t[0])if(l.objectMode=!0,e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s+orderBy:(.+)\s*$/))l.objectKey=e[1],l.objectValue=e[2],l.expression=e[3]+(" | toArray:"+l.objectKey+","+l.objectValue+" | orderBy:"+e[4]),l.nameOfKey="$item",l.trackExpression="$item."+l.objectKey;else{if(e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s*$/),!e)throw"Wrong repeat: "+i;l.objectKey=e[1],l.objectValue=e[2],l.expression=e[3]+(" | toArray:"+l.objectKey+","+l.objectValue),l.nameOfKey="$item",l.trackExpression="$item."+l.objectKey}else{if(e=t.match(/(.*) track by ([\w\.\$\(\)]+)/),e&&(l.trackExpression=e[2],t=e[1]),e=t.match(/\s*(\w+)\s+in\s+(.+)/),!e)throw"Wrong repeat: "+i;l.nameOfKey=e[1],l.expression=e[2]}},watchModel:function(){var e;e=l.objectMode?{deep:!0}:{isArray:!0},l.watch=a.watch(l.expression,l.updateDom,e)},prepareDom:function(){var e,n,a,c,s,u;if(8===r.nodeType){for(l.top_element=r,l.element_list=n=[],e=r.nextSibling;e;){if(8===e.nodeType&&(s=e.nodeValue,u=s.trim().split(/\s+/),"/directive:"===u[0]&&"al-repeat"===u[1])){o.skipToElement=e;break}n.push(e),e=e.nextSibling}for(a=0,c=n.length;c>a;a++)e=n[a],t.remove(e)}else l.base_element=r,l.top_element=document.createComment(" "+i+" "),t.before(r,l.top_element),t.remove(r)},makeChildConstructor:function(){var e;e=function(){return this.$root=a.scope.$root||a.scope,this},e.prototype=a.scope,l.ChildScope=e},makeChild:function(e,t,n){var r,i;return i=new l.ChildScope,i.$rootChangeDetector=r=a["new"](i),l.updateChild(r,e,t,n),r},updateChild:function(e,t,n,r){var i;i=e.scope,l.objectMode?(i[l.objectKey]=t[l.objectKey],i[l.objectValue]=t[l.objectValue]):i[l.nameOfKey]=t,i.$index=n,i.$first=0===n,i.$last=n===r.length-1},rawUpdateDom:function(e,n){var r,i,o,a,l,c;for(i=0,l=e.length;l>i;i++)r=e[i],t.remove(r);for(a=0,c=n.length;c>a;a++)o=n[a],t.after(o.after,o.element)},buildUpdateDom:function(){return l.updateDom=function(){var t,n,i,c,s,u,f,p,h,d,v;return v=[],u=0,i=!1,"$index"===l.trackExpression?(f={},h=function(){var e;return e=u,f[e]||null},p=function(e){var t;t=e.$id,null!=t&&delete f[t]},d=function(e,t){var n;n=u,t.$id=n,f[n]=t}):l.trackExpression?(f={},t=function(){var e;return e=a.compile(l.trackExpression,{input:["$id",l.nameOfKey]}),function(t,n){return e(a.scope,t,n)}}(),n=function(t){var n;return(n=t.$alite_id)?n:n=t.$alite_id=e.utils.getId()},h=function(e){var r;return r=t(n,e),null!=r?f[r]:null},p=function(e){var t;t=e.$id,null!=t&&delete f[t]},d=function(e,r){var i;i=t(n,e),r.$id=i,f[i]=r}):window.Map?(f=new Map,h=function(e){return f.get(e)},p=function(e){f["delete"](e.item)},d=function(e,t){f.set(e,t)}):(f={},h=function(e){var t;return"object"!=typeof e?f[e]||null:(t=e.$alite_id)?f[t]:null},p=function(e){var t;t=e.$id,f[t]&&(e.$id=null,delete f[t])},d=function(t,n){var r;"object"==typeof t?(r=e.utils.getId(),t.$alite_id=r,n.$id=r,f[r]=n):(n.$id=t,f[t]=n)}),c=[],s=function(e){var t,n;if(n=typeof e,"object"!==n){if("number"===n)t=Math.floor(e);else if("string"===n&&(t=Math.floor(e),isNaN(t)))return[];if(t<c.length)c.length=t;else for(;c.length<t;)c.push(c.length);return c}return e&&e.length?e:[]},l.element_list?function(t){var n,r,i,a,c,f,m,g,y,w,$,b,x,k,D,C,_,T,S,A,B,M,O,N,j,E,L,V,I,H,F,W,K,P,q,U,R,G,Y;for(j=s(t),C=l.top_element,a=[],H=[],y=0,_=v.length;_>y;y++)I=v[y],I.active=!1;for(u=x=0,T=j.length;T>x;u=++x)$=j[u],I=h($),I&&(I.active=!0);for(c=[],k=0,S=v.length;S>k;k++)if(I=v[k],!I.active){for(I.prev&&(I.prev.next=I.next),I.next&&(I.next.prev=I.prev),p(I),I.CD.destroy(),U=I.element_list,D=0,A=U.length;A>D;D++)f=U[D],c.push(f);I.next=null,I.prev=null,I.element_list=null}for(n=[],K=null,q=null,P=!1,m=l.element_list.length-1,u=E=0,B=j.length;B>E;u=++E)if($=j[u],b=$,I=h($)){if(l.updateChild(I.CD,$,u,j),I.prev===q){if(P)for(R=I.element_list,L=0,M=R.length;M>L;L++)f=R[L],a.push({element:f,after:C}),C=f;q=I,C=I.element_list[m],I.active=!0,H.push(I);continue}for(I.prev=q,q&&(q.next=I),G=I.element_list,F=0,O=G.length;O>F;F++)f=G[F],a.push({element:f,after:C}),C=f;P=!0,q=I,I.active=!0,H.push(I)}else i=l.makeChild(b,u,j),g=function(){var e,t,o,c;for(o=l.element_list,c=[],t=0,e=o.length;e>t;t++)r=o[t],f=r.cloneNode(!0),n.push({cd:i,el:f}),a.push({element:f,after:C}),c.push(C=f);return c}(),I={CD:i,element_list:g,prev:q,next:null,active:!0,item:$},d($,I),q?(V=q.next,q.next=I,I.next=V,V&&(V.prev=I)):0===u&&v[0]&&(V=v[0],I.next=V,V.prev=I),q=I,H.push(I);for(v=H,l.rawUpdateDom(c,a),c.length=0,a.length=0,Y=o.skippedAttr(),W=0,N=n.length;N>W;W++)w=n[W],e.bind(w.cd,w.el,{skip_attr:Y})}:function(t){var n,a,c,f,m,g,y,w,$,b,x,k,D,C,_,T,S,A,B,M,O,N,j,E,L,V,I;for(A=s(t),k=l.top_element,c=[],N=[],m=0,D=v.length;D>m;m++)O=v[m],O.active=!1;for(u=$=0,C=A.length;C>$;u=++$)y=A[u],O=h(y),O&&(O.active=!0);for(f=[],b=0,_=v.length;_>b;b++)O=v[b],O.active||(O.prev&&(O.prev.next=O.next),O.next&&(O.next.prev=O.prev),p(O),O.CD.destroy(),f.push(O.element),O.next=null,O.prev=null,O.element=null);for(n=[],j=null,L=null,E=!1,u=x=0,T=A.length;T>x;u=++x)if(y=A[u],w=y,O=h(y)){if(l.updateChild(O.CD,y,u,A),O.prev===L){E&&c.push({element:O.element,after:L.element}),L=O,k=O.element,O.active=!0,N.push(O);continue}O.prev=L,L&&(L.next=O),c.push({element:O.element,after:k}),E=!0,k=O.element,L=O,O.active=!0,N.push(O)}else a=l.makeChild(w,u,A),r=l.base_element.cloneNode(!0),n.push({cd:a,el:r}),c.push({element:r,after:k}),O={CD:a,element:r,prev:L,next:null,active:!0,item:y},k=r,d(y,O),L?(M=L.next,L.next=O,O.next=M,M&&(M.prev=O)):0===u&&v[0]&&(M=v[0],O.next=M,M.prev=O),L=O,N.push(O);for(v=N,l.rawUpdateDom(f,c),f.length=0,c.length=0,I=o.skippedAttr(),B=0,S=n.length;S>B;B++)g=n[B],i?i.bind(g.cd,g.el):(V=e.bind(g.cd,g.el,{skip_attr:I}),0===V.directive&&0===V.hook&&(i=new e.core.fastBinding(l.base_element)))}}()}}}},e.d.al.init=function(t,n,r){var i,o;try{o=t.$compile(r,{no_return:!0}),o(t)}catch(a){i=a,e.exceptionHandler(i,"al-init, error in expression: "+r,{exp:r,scope:t,element:n})}},e.d.al["class"]=e.d.al.css={priority:30,link:function(n,r,i){var o;return o={start:function(){o.parsLine(),o.prepare()},parsLine:function(){var t,a,l,c,s,u;for(o.list=s=[],u=i.split(","),l=0,c=u.length;c>l;l++)t=u[l],a=t.indexOf(":"),0>a?e.exceptionHandler(t,"al-css, error in expression: "+i,{exp:i,e:t,scope:n,element:r}):s.push({css:t.slice(0,+(a-1)+1||9e9).trim().split(" "),exp:t.slice(a+1).trim()})},prepare:function(){var e,t,r,i,a;for(a=o.list,r=0,i=a.length;i>r;r++)t=a[r],e=function(e){return function(t){return o.draw(e,t),"$scanNoChanges"}}(t),n.$watch(t.exp,e)},draw:function(e,n){var i,o,a,l,c,s,u;if(n)for(s=e.css,o=0,l=s.length;l>o;o++)i=s[o],t.addClass(r,i);else for(u=e.css,a=0,c=u.length;c>a;a++)i=u[a],t.removeClass(r,i)}}}},e.d.al.src=function(e,t,n){var r;r=function(e){return e||(e=""),t.setAttribute("src",e),"$scanNoChanges"},e.$watchText(n,r)},e.d.al.text=function(e,t,n){var r;return r={start:function(){r.watchModel()},updateDom:function(e){return null==e&&(e=""),void 0!==t.textContent?t.textContent=e:t.innerText=e,"$scanNoChanges"},watchModel:function(){e.$watch(n,r.updateDom)}}},e.d.al.app={priority:2e3,stopBinding:!0},e.d.bo["switch"]={priority:500,ChangeDetector:!0,link:function(e,t,n,r){r.changeDetector.$switch={value:e.$eval(n),on:!1}}},e.d.bo.switchWhen={priority:500,link:function(e,n,r,i){var o;o=i.changeDetector,o.$switch.value!==r?(t.remove(n),i.stopBinding=!0):o.$switch.on=!0}},e.d.bo.switchDefault={priority:500,link:function(e,n,r,i){i.changeDetector.$switch.on&&(t.remove(n),i.stopBinding=!0)}},function(){var n;return n=function(e){var n;return n={priority:700,link:function(n,r,i,o){var a;a=n.$eval(i),!a===e&&(t.remove(r),o.stopBinding=!0)}}},e.d.bo["if"]=n(!0),e.d.bo.ifnot=n(!1)}(),e.d.al.stop={priority:-10,restrict:"AE",stopBinding:!0},e.d.al.include={priority:100,stopBinding:!0,link:function(n,r,i,o){var a,l,c,s,u;return c=null,l=null,u=null,a=null,s={start:function(){s.prepare(),s.watchModel()},prepare:function(){l=r,u=document.createComment(" "+o.attrName+": "+i+" "),t.before(r,u),t.remove(r)},loadHtml:function(e){t.ajax(e)},removeBlock:function(){c&&(c.destroy(),c=null),a&&(s.removeDom(a),a=null)},insertBlock:function(t){a=l.cloneNode(!0),a.innerHTML=t,s.insertDom(u,a),c=o.changeDetector["new"](),e.bind(c,a,{skip_attr:o.skippedAttr()})},updateDom:function(e){return e?void s.loadHtml({cache:!0,url:e,success:function(e){return s.removeBlock(),s.insertBlock(e)},error:s.removeBlock}):void s.removeBlock()},removeDom:function(e){t.remove(e)},insertDom:function(e,n){t.after(e,n)},watchModel:function(){n.$watch(i,s.updateDom)}}}},e.d.al.cloak=function(e,n,r,i){n.removeAttribute(i.attrName),r&&t.removeClass(n,r)},e.d.al.enable=function(e,t,n){var r;r=function(e){e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")},e.$watch(n,r)},e.d.al.disable=function(e,t,n){var r;r=function(e){e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")},e.$watch(n,r)},e.d.al.focused=function(e,n,r){var i;return i={updateModel:function(t){e.$getValue(r)!==t&&(e.$setValue(r,t),e.$scan({skipWatch:self.watch}))},onDom:function(){var r,o;o=function(){return i.updateModel(!0)},r=function(){return i.updateModel(!1)},t.on(n,"focus",o),t.on(n,"blur",r),e.$watch("$destroy",function(){return t.off(n,"focus",o),t.off(n,"blur",r)})},updateDom:function(e){return e?n.focus():n.blur(),"$scanNoChanges"},watchModel:function(){self.watch=e.$watch(r,i.updateDom)},start:function(){i.onDom(),i.watchModel()}}},e.d.al.readonly=function(e,t,n){var r;r=function(e){t.readOnly=!!e},e.$watch(n,r,{readOnly:!0})},e.d.al.submit=function(n,r,i){var o;return o={callback:n.$compile(i,{no_return:!0,input:["$event"]}),start:function(){o.onDom()},onDom:function(){t.on(r,"submit",o.doCallback),n.$watch("$destroy",o.offDom)},offDom:function(){t.off(r,"submit",o.doCallback)},doCallback:function(t){t.preventDefault(),t.stopPropagation();try{o.callback(n,t)}catch(a){t=a,e.exceptionHandler(t,"al-submit, error in expression: "+i,{name:i,scope:n,element:r})}n.$scan()}}};var A,B,M,O,N;for(N=["keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","focus","blur","change"],A=function(n){return e.d.al[n]=function(r,i,o){var a;return a={start:function(){a.makeCaller(),a.onDom()},makeCaller:function(){a.caller=r.$compile(o,{no_return:!0,input:["$event"]})},onDom:function(){t.on(i,n,a.callback),r.$watch("$destroy",a.offDom)},offDom:function(){t.off(i,n,a.callback)},callback:function(t){try{a.caller(r,t)}catch(l){t=l,e.exceptionHandler(t,n+", error in expression: "+o,{exp:o,scope:r,element:i})}r.$scan()}}}},B=0,O=N.length;O>B;B++)M=N[B],A(M);e.d.al.html={priority:100,stopBinding:!0,link:function(t,n,r,i){var o,a,l;o=i.changeDetector,a=null,l=function(t){return a&&(a.destroy(),a=null),t?(n.innerHTML=t,a=o["new"](),void e.bind(a,n,{skip_attr:i.skippedAttr()})):void(n.innerHTML="")},o.watch(r,l)}},e.d.al.radio={priority:10,link:function(e,n,r,i){var o;return o={start:function(){o.makeValue(),o.onDom(),o.watchModel()},makeValue:function(){var t,n;t=i.takeAttr("al-value"),n=t?e.$eval(t):i.takeAttr("value"),o.value=n},onDom:function(){t.on(n,"change",o.updateModel),e.$watch("$destroy",o.offDom)},offDom:function(){t.off(n,"change",o.updateModel)},updateModel:function(){e.$setValue(r,o.value),e.$scan({skipWatch:o.watch})},watchModel:function(){o.watch=e.$watch(r,o.updateDom)},updateDom:function(e){return n.checked=e===o.value,"$scanNoChanges"}}}},e.d.al.show=function(e,n,r){var i;return i={showDom:function(){t.removeClass(n,"al-hide")},hideDom:function(){t.addClass(n,"al-hide")},updateDom:function(e){return e?i.showDom():i.hideDom(),"$scanNoChanges"},watchModel:function(){e.$watch(r,i.updateDom)},start:function(){i.watchModel()}}},e.d.al.hide=function(t,n,r,i){var o;return o=e.d.al.show(t,n,r,i),o.updateDom=function(e){return e?o.hideDom():o.showDom(),"$scanNoChanges"},o},e.d.al.style=function(e,t,n){var r,i;r={},i=function(e){var n,i,o,a;for(i in r)a=r[i],t.style[i]="";r={},o=e||{};for(n in o)a=o[n],i=n.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),r[i]=a,t.style[i]=a||""},e.$watch(n,i,{deep:!0})},function(){var n;return window.Map?(n=function(){return this.idByItem=new Map,this.itemById={},this.index=1,this},n.prototype.acquire=function(e){var t;return t="i"+this.index++,this.idByItem.set(e,t),this.itemById[t]=e,t},n.prototype.release=function(e){var t;t=this.itemById[e],delete this.itemById[e],this.idByItem["delete"](t)},n.prototype.replace=function(e,t){var n;n=this.itemById[e],this.idByItem["delete"](n),this.idByItem.set(t,e),this.itemById[e]=t},n.prototype.getId=function(e){return this.idByItem.get(e)},n.prototype.getItem=function(e){return this.itemById[e]||null}):(n=function(){return this.itemById={"i#null":null},this},n.prototype.acquire=function(t){var n;return null===t?"i#null":("object"==typeof t?(n=t.$alite_id,n||(t.$alite_id=n=e.utils.getId())):n=""+t,this.itemById[n]=t,n)},n.prototype.release=function(e){delete this.itemById[e]},n.prototype.replace=function(e,t){this.itemById[e]=t},n.prototype.getId=function(e){return null===e?"i#null":"object"==typeof e?e.$alite_id:""+e},n.prototype.getItem=function(e){return this.itemById[e]||null}),e.d.al.select=function(r,i,o,a){var l,c,s,u;return l=a.changeDetector["new"](),a.stopBinding=!0,l.$select=c=new n,e.bind(l,i,{skip_attr:a.skippedAttr()}),u=l.watch(o,function(e){var t;return t=c.getId(e),t?i.value=t:i.selectedIndex=-1}),l.scan(),s=function(e){var t;return t=c.getItem(e.target.value),l.setValue(o,t),l.scan({skipWatch:u})},t.on(i,"input",s),t.on(i,"change",s),l.watch("$destroy",function(){return t.off(i,"input",s),t.off(i,"change",s)})},e.d.al.option=function(t,n,r,i){var o,a,l,c,s,u;for(o=u=i.changeDetector,a=c=0;4>=c&&!(s=u.$select);a=++c)u=u.parent||{};return s?(l=null,o.watch(r,function(e){l?s.getId(e)!==l?(s.release(l),l=s.acquire(e),n.value=l):s.replace(l,e):(l=s.acquire(e),n.value=l)}),void o.watch("$destroy",function(){return s.release(l)})):void e.exceptionHandler("","Error in al-option - al-select is not found",{cd:o,scope:o.scope,element:n,value:r})}}(),e.d.al.ctrl={global:!1,stopBinding:!0,priority:500,link:function(t,n,r,i){var o,a;return o=function(o,a){e.exceptionHandler(o,a,{name:r,env:i,scope:t,element:n})},a={getController:function(n){var r,i;return r=t.$ns,r&&r.ctrl&&(i=r.ctrl[n],!i&&!r.inheritGlobal)?void o("","Controller not found in $ns: "+n):(i||(i=e.ctrl[n],!i&&e.d.al.ctrl.global&&(i=window[n])),i||o("","Controller not found: "+n),i)},start:function(){var l,c,s,u,f,p,h,d,m;if(f=a.getController(r)){if(Object.keys(f.prototype).length){l=function(){},h=v.prototype;for(p in h)m=h[p],l.prototype[p]=m;d=f.prototype;for(p in d)m=d[p],l.prototype[p]=m;s=new l}else s=e.Scope({changeDetector:null});c=i.changeDetector["new"](s),s.$rootChangeDetector=c,s.$parent=t;try{f.call(s,s,n,r,i)}catch(g){u=g,o(u,"Error in controller: "+r)}e.bind(c,n,{skip_attr:i.skippedAttr()})}}}}},e.filters.slice=function(e,t,n){var r,i,o,a,l,c;return c=null,r=null,i=null,a=null,l=function(){return c&&a?n.setValue(2===a?c.slice(r,i):c.slice(r)):void 0},o=e.split(","),1===o.length?t.$watch(e,function(e){return a=1,r=e,l()}):t.$watch(o[0]+" + '_' + "+o[1],function(e){var t;return a=2,t=e.split("_"),r=Number(t[0]),i=Number(t[1]),l()}),this.onChange=function(e){return c=e,l()},this},e.filters.slice.prototype.ext=!0,function(){var t,n;return t=function(e){return 10>e?"0"+e:""+e},n=function(e,n){var r,i,o,a,l;if(!n)return"";for(n=new Date(n),l=[[/yyyy/g,n.getFullYear()],[/mm/g,t(n.getMonth()+1)],[/dd/g,t(n.getDate())],[/HH/g,t(n.getHours())],[/MM/g,t(n.getMinutes())],[/SS/g,t(n.getSeconds())]],a=e,i=0,o=l.length;o>i;i++)r=l[i],a=a.replace(r[0],r[1]);return a},e.filters.date=function(e,t){return n(t,e)}}();var j;e.filters.json=j=function(){function t(){}return t.prototype.watchMode="deep",t.prototype.onChange=function(t){return this.setValue(JSON.stringify(e.utils.clone(t),null,4))},t}();var E;e.filters.filter=E=function(){function e(e,t,n){var r,i;i=this,r=null,this.value=[],this.doFiltering=function(){var e,t,o,a,l,c,s;if(t=r,!t)return n.setValue(i.value),null;if("string"==typeof t)t={__all:t};else if("object"!=typeof t)return n.setValue(i.value),null;return c=function(){var n,r,c,u;for(c=i.value,u=[],n=0,r=c.length;r>n;n++)if(l=c[n],"object"==typeof l){if(o=!0,t.__all){o=!1,e=t.__all.toLowerCase();for(a in l)if(s=l[a],"$alite_id"!==a&&(""+s).toLowerCase().indexOf(e)>=0){o=!0;break}if(!o)continue}for(a in t)if(s=t[a],"__all"!==a){if(e=l[a],!e){o=!1;break}if((""+e).toLowerCase().indexOf((""+s).toLowerCase())<0){o=!1;break}}if(!o)continue;u.push(l)}else{if(!t.__all)continue;if(e=t.__all.toLowerCase(),(""+l).toLowerCase().indexOf(e)<0)continue;u.push(l)}return u}(),n.setValue(c),null},t.$watch(e,function(e){return r=e,i.doFiltering()},{deep:!0})}return e.prototype.onChange=function(e){return this.value=e,this.doFiltering()},e}();var L;e.filters.orderBy=L=function(){function e(e,t){var n,r,i,o,a;a=this,n=e.split(","),this.list=null,i="key",r=1,o=function(e,t){var n,o;return n=e[i]||null,o=t[i]||null,o>n?-r:n>o?r:0},a.doSort=function(){return a.list instanceof Array?(a.list.sort(o),a.setValue(a.list)):void 0},n[0]&&t.$watch(n[0].trim(),function(e){return i=e,a.doSort()}),n[1]&&t.$watch(n[1].trim(),function(e){return r=e?1:-1,a.doSort()})}return e.prototype.onChange=function(e){return this.list=e instanceof Array?e.slice():null,this.doSort()},e}();var V;e.filters.throttle=V=function(){function e(e,t,n){var r;e=Number(e),r=null,this.onChange=function(i){return r&&clearTimeout(r),r=setTimeout(function(){return r=null,n.setValue(i),t.$scan()},e)}}return e.prototype.ext=!0,e}();var I;return e.filters.toArray=I=function(){function e(e,t,n){var r,i,o,a;if(e){if(r=e.split(","),2!==r.length)throw"Wrong filter arguments for toArray";i=r[0].trim(),a=r[1].trim()}else i="key",a="value";o=[],this.onChange=function(e){var t,l;o.length=0;for(t in e)l=e[t],r={},r[i]=t,r[a]=l,o.push(r);return n.setValue(o)}}return e.prototype.watchMode="deep",e}(),e.filters.storeTo=function(e,t,n){return n.$setValue(t,e),e},e.text["="]=function(t,n,r,i){var o;if(o=e.utils.compile.expression(n),o.filters)throw"Conflict: bindonce and filters, use one-time binding";i["finally"](o.fn(r))},e.text["::"]=function(e,t,n,r){n.$watch(t,function(e){return r["finally"](e)},{oneTime:!0})},e.text["&"]=function(e,t,n){var r,i;return r=t.split(":"),i=n.$compile(r[1],{input:["$value"]}),n.$watch(r[0],function(t){var r;return r=i(n,t),window.Promise&&r instanceof Promise?r.then(function(t){return e(t),n.$scan()}):e(r)})},e}var t=e();t.makeInstance=e,"function"==typeof define?define(function(){return t}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t:"function"==typeof alightInitCallback?alightInitCallback(t):(t.d.al.ctrl.global=!0,window.alight=t,t.f$.ready(t.bootstrap))}();