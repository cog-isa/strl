<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title> для тестов </title>
  <script src="/static/js/require.js"></script>
  
  
    <link rel="stylesheet" href="/static/css/jquery-ui-1.10.4.custom.css"/>  
    <link rel="stylesheet" href="/static/js/lib/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/js/lib/bootstrap-editable/css/bootstrap-editable.css"/>
 </head>
 
 <body>
 
 
<!--	<div id="rec" class="rectang">  </div>	-->
	<form id="data">
		<button id="start" style="position: fixed; bottom: 20px; left: 30px; width: 100px">Запуск
		</button>
				
	<div 	id="workarea" tabindex="-1" 
			style="position:relative;"> <!-- ,было relative///будет absolute ?    onkeydown="S.containerInput(event);"  -->
		
		<!--для масштаба. попробовать без контейнера.. с workarea??--->	
        <div 	id="container"  
				style="cursor: default; 
				position: fixed;	
				transform: scale({{scale}});
				transform-origin:top;"
				>	
				
		
		
		<canvas height='1600' width='1800' id='map'
				style="	overflow: auto;  
						position: fixed;
							right:5px;
							top:5px;"					
		></canvas>
		<script>
			var map = document.getElementById("map"),
			    ctx = map.getContext('2d');
				
			ctx.fillStyle ="rgba(20, 20, 190, 0.1)";
			ctx.fillRect(0, 0, map.width, map.height);
		</script>
				
		<!--		
		<svg 	height="600px"
					version="1.1"
					width="800px"
					xmlns="http://www.w3.org/2000/svg" 
					style="	overflow: auto;  
							position: fixed; 
							
							right:10px;
							top:20px;
							
							background-color:rgba(20, 20, 190, 0.10);"
		>
		 
		</svg> -->
		
            <div id="nodes"
				 style="position:relative;"
			>  
			
			<!--strl-agent="" - сделать для работы с выводом свойств объекта
			TODO сделать директиву списка свойств, которая будет таскаться
			-->
                <div 	al-repeat="nodeid in helper.nodesIDs()" /*здесь важно чтобы nodes[] node - это в коде есть*/                       
						
						id="{{nodes[nodeid].id}}" class="agent"
						
						style="
							display:inline-block;
							position: relative;
							
							background-size: 15px 15px;
							
							visibility: {{nodes[nodeid].isVisible ? 'visible' : 'hidden'}};
							"
                        
                        tabindex="-1"
                        
                        al-click="nodes[nodeid]._select()"
						
                        al-css="nodeselected: selectednode.id==nodes[nodeid].id"
                    >

                        <div class ="node_icon"
							al-repeat="icon in nodes[nodeid].icons"
							title="{{icon.hint}}"
							al-if="icon.img">
                            <img al-src="{{icon.img}}" ></img>
                        </div>
						
						<!--редактируемое название агента  style="width: 1px">-->
                        <div class="ediatable text_cut">
                            <span 	class="nodetitle"
									style="border-bottom: dashed 1px #0088cc;
										   width: 1px">lz
							</span>
							
							<!-- info circle -->
							<span 	class="info_circle"
									style="float:right; width:15px; height:15px;
											background-image:url(/static/img/glyphicons_free/glyphicons/png/glyphicons_195_circle_info.png);
											background-size: 15px 15px;
											
											opacity: 0.5;"    >
							</span>
							
                        </div>
                       
                </div>
					
                
            </div>	
			
		</div>
	</div>		
		
	</form>

		
  
  <script>
	//$('Start').;
	/* что-то подобное в функции
					var arr = xy.split(' ');
					while (arr[0] < x){
						while (arr[1]<y){
							arr[0] +=1;
							arr[1] +=1;
							//перерисовать
						}
					}	*/	
	
	//gogo(200,150);
  </script>
  
  
  <script>
		require(["/static/js/jquery-1.9.1.js" /*for jq_ui*/, ], function(_jquery){
			require([
						"/static/js/jquery-ui.js", 
						'/gogo.js',
						//'/static/js/modules/strl_gui.js',
												
						// bootstrap 	 
						'/static/js/lib/bootstrap/js/bootstrap.min.js',
						'/static/js/lib/bootstrap-editable/js/bootstrap-editable.min.js',
                        '/static/js/tree7_scripts.js',
                        // simpletip
                        '/static/js/lib/simpletip/jquery.simpletip-1.3.1.pack.js',
					],
					function( _jq_ui, gogo ){
						// CONFIGURE SCOPE AND BIND to BODY
						var tag = document.querySelector('body'); 
						//alight.debug = true;// ИНОГДА ПОМОГАЕТ TODO убрать
						var scope = alight.Scope();
						
						//scope = 'tyt';
						
						// init scope
						gogo.agent_app(scope);
						//gui7state.tree7app(scope);
						alight.applyBindings(scope, tag);
						
			});
		});
  </script>
 
 </body>
 
</html>